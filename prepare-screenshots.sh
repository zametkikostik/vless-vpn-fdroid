#!/bin/bash
# –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤ –¥–ª—è F-Droid

set -e

echo "========================================"
echo "üì∏ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤ –¥–ª—è F-Droid"
echo "========================================"

SCREENSHOTS_DIR="fastlane/metadata/android/en-US/images/phoneScreens"
ICON_DIR="fastlane/metadata/android/en-US/images"

# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
echo ""
echo "üìÅ –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π..."
mkdir -p "$SCREENSHOTS_DIR"
mkdir -p "$ICON_DIR"

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∫–æ–Ω–∫–∏
echo ""
echo "üé® –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∫–æ–Ω–∫–∏..."
if [ -f "app/src/main/res/mipmap-hdpi/ic_launcher.png" ]; then
    cp app/src/main/res/mipmap-hdpi/ic_launcher.png "$ICON_DIR/icon.png"
    echo "‚úÖ –ò–∫–æ–Ω–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞"
else
    echo "‚ö†Ô∏è –ò–∫–æ–Ω–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, —Å–æ–∑–¥–∞—ë–º placeholder..."
    # –°–æ–∑–¥–∞—ë–º –ø—Ä–æ—Å—Ç–æ–π placeholder
    convert -size 512x512 xc:green \
        -fill white -gravity center \
        -pointsize 200 -annotate 0 "V" \
        "$ICON_DIR/icon.png" 2>/dev/null || echo "‚ö†Ô∏è ImageMagick –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
fi

# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤
echo ""
echo "========================================"
echo "üì∏ –°–∫—Ä–∏–Ω—à–æ—Ç—ã"
echo "========================================"
echo ""
echo "–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤:"
echo ""
echo "1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —ç–º—É–ª—è—Ç–æ—Ä–µ –∏–ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ"
echo "2. –°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã:"
echo "   - –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω"
echo "   - –≠–∫—Ä–∞–Ω –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è"
echo "   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)"
echo ""
echo "3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –≤:"
echo "   $SCREENSHOTS_DIR/"
echo ""
echo "4. –ù–∞–∑–æ–≤–∏—Ç–µ —Ñ–∞–π–ª—ã:"
echo "   - 1.png (–ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω)"
echo "   - 2.png (–≠–∫—Ä–∞–Ω –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è)"
echo "   - 3.png (–ù–∞—Å—Ç—Ä–æ–π–∫–∏)"
echo ""
echo "–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞–º:"
echo "   - –§–æ—Ä–º–∞—Ç: PNG –∏–ª–∏ JPG"
echo "   - –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞: 320px"
echo "   - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞: 3840px"
echo "   - –ë–µ–∑ —Ç–µ–∫—Å—Ç–∞ –ø–æ–≤–µ—Ä—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è"
echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞
echo ""
echo "========================================"
echo "üìä –ü—Ä–æ–≤–µ—Ä–∫–∞"
echo "========================================"
echo ""

if [ -f "$ICON_DIR/icon.png" ]; then
    echo "‚úÖ –ò–∫–æ–Ω–∫–∞: $ICON_DIR/icon.png"
    ls -lh "$ICON_DIR/icon.png"
else
    echo "‚ùå –ò–∫–æ–Ω–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
fi

echo ""
echo "üì∏ –°–∫—Ä–∏–Ω—à–æ—Ç—ã:"
ls -lh "$SCREENSHOTS_DIR"/*.png 2>/dev/null || echo "‚ö†Ô∏è –°–∫—Ä–∏–Ω—à–æ—Ç—ã –µ—â—ë –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã"

echo ""
echo "========================================"
echo "‚úÖ –ì–æ—Ç–æ–≤–æ!"
echo "========================================"
